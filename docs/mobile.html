<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAR League - Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1a1a1a;
            color: white;
            line-height: 1.4;
        }
        
        .header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            text-align: center;
            padding: 20px 10px;
        }
        
        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .tier-section {
            margin-bottom: 5px;
        }
        
        .tier-header {
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .tier-Master { background: #FFD700; color: #000; }
        .tier-Diamond { background: #66D9EF; color: #000; }
        .tier-Platinum { background: #C0C0C0; color: #000; }
        .tier-Gold { background: #FFED4A; color: #000; }
        .tier-Silver { background: #A8A8A8; color: #000; }
        .tier-Bronze { background: #CD7F32; color: #000; }
        
        .player {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            border-bottom: 1px solid #333;
            background: #2a2a2a;
        }
        
        .rank {
            font-weight: bold;
            min-width: 35px;
            color: #888;
        }
        
        .icon {
            margin: 0 8px;
        }
        
        .info {
            flex: 1;
            min-width: 0;
        }
        
        .name {
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .stats {
            font-size: 0.8em;
            color: #888;
        }
        
        .points {
            font-weight: bold;
            color: #4CAF50;
            font-size: 0.9em;
        }
        
        .loading, .error {
            text-align: center;
            padding: 50px 20px;
        }
        
        .error {
            color: #f44336;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸš€ BAR League</h1>
        <div id="stats">Loading...</div>
    </div>
    
    <div id="leaderboard">
        <div class="loading">Loading leaderboard...</div>
    </div>

    <script>
        async function loadLeaderboard() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/Atlasfailed/bar-duel-championship/main/public/data/leaderboard.json?t=' + Date.now());
                const data = await response.json();
                
                // Group by tier
                const tiers = {};
                const tierOrder = ['Master', 'Diamond', 'Platinum', 'Gold', 'Silver', 'Bronze'];
                
                data.forEach((player, index) => {
                    const tier = player.tier || 'Bronze';
                    if (!tiers[tier]) tiers[tier] = [];
                    tiers[tier].push({...player, rank: index + 1});
                });
                
                let html = '';
                tierOrder.forEach(tier => {
                    if (tiers[tier]) {
                        html += `<div class="tier-section">
                            <div class="tier-header tier-${tier}">${tier}</div>`;
                        
                        tiers[tier].forEach(p => {
                            const wr = p.wins + p.losses > 0 ? Math.round(p.wins / (p.wins + p.losses) * 100) : 0;
                            html += `<div class="player">
                                <div class="rank">#${p.rank}</div>
                                <div class="icon">${p.icon || 'ðŸŽ¯'}</div>
                                <div class="info">
                                    <div class="name">${p.player}</div>
                                    <div class="stats">${p.wins}W-${p.losses}L (${wr}%)</div>
                                </div>
                                <div class="points">${p.points || 0}</div>
                            </div>`;
                        });
                        
                        html += '</div>';
                    }
                });
                
                document.getElementById('leaderboard').innerHTML = html;
                document.getElementById('stats').innerHTML = `${data.length} Players | ${Math.floor(data.reduce((s,p) => s + p.wins + p.losses, 0)/2)} Matches`;
                
            } catch (error) {
                document.getElementById('leaderboard').innerHTML = `<div class="error">Failed to load: ${error.message}</div>`;
            }
        }
        
        loadLeaderboard();
        setInterval(loadLeaderboard, 5 * 60 * 1000);
    </script>
</body>
</html>